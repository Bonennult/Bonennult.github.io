

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/2.5DG.png">
  <link rel="icon" type="image/png" href="/img/2.5DG.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Glooow">
  <meta name="keywords" content="">
  <title>凸优化笔记 10：凸优化问题 - 你是下雨天</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Glooow</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="凸优化笔记 10：凸优化问题">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-03-14 23:54" pubdate>
        March 14, 2020 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.3k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      85
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">凸优化笔记 10：凸优化问题</h1>
            
            <div class="markdown-body">
              <p>前面讲了那么多关于凸集、凸函数的知识，然而都是铺垫，现在我们才来到了这门课的重头戏部分——凸优化问题！</p>
<a id="more"></a>
<h2 id="1-一般优化问题"><a href="#1-一般优化问题" class="headerlink" title="1. 一般优化问题"></a>1. 一般优化问题</h2><p>一般优化问题的形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}(x)\\
\text { subject to } \quad& f_{i}(x) \leq 0, \quad i=1, \ldots, m\\
&h_{i}(x)=0, \quad i=1, \ldots, p
\end{aligned}</script><p>其中 $f_0(x)$ 为目标函数，$f_i(x)$ 为不等式约束函数， $h_i$ 为等式约束函数。优化问题的<strong>最优解</strong>为 </p>
<script type="math/tex; mode=display">
p^{\star}=\inf \left\{f_{0}(x) | f_{i}(x) \leq 0, i=1, \ldots, m, h_{i}(x)=0, i=1, \ldots, p\right\}</script><p>如果 $p^<em>=\infty$，则问题不可行；如果 $p^</em>=-\infty$ 则该问题没有下界。</p>
<p><strong>最优解</strong>则有 $f_0(x)=p^<em>$，<em>*局部最优解(local optimal)</em></em>有</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} (\text{over } z) \quad& f_{0}(z) \\
\text{subject to} \quad&f_{i}(z) \leq 0, \quad i=1, \ldots, m, \quad h_{i}(z)=0, \quad i=1, \ldots, p \\
&\|z-x\|_{2} \leq R
\end{aligned}</script><p>也即只在一个小的邻域内考虑优化问题。</p>
<p>注意：</p>
<ul>
<li>有的优化问题有最小值，但是没有可行解，比如 $f_0(x)=1/x$；</li>
<li>有的问题根本就没有最小值，比如 $f_0(x)=-\log x$</li>
<li>有的问题只有局部最小值，比如 $f_0(x)=x^3-3x$</li>
</ul>
<p>上面提到的优化问题中有等式和不等式约束，这些我们都称为<strong>显式约束(explicit constraints)</strong>，同时由于 $x$ 应属于各个函数的定义域内，因此还有<strong>隐式约束(implicit constraint)</strong>，即</p>
<script type="math/tex; mode=display">
x \in \mathcal{D}=\bigcap_{i=0}^{m} \operatorname{dom} f_{i} \cap \bigcap_{i=1}^{p} \operatorname{dom} h_{i}</script><p>没有显式约束的优化问题被称为<strong>无约束优化问题(unconstrained)</strong>。比如</p>
<script type="math/tex; mode=display">
\text { minimize } \quad f_{0}(x)=-\sum_{i=1}^{k} \log \left(b_{i}-a_{i}^{T} x\right)</script><p>是一个无约束优化问题，包含了隐式约束 $a_i^Tx&lt; b_i$。</p>
<p>其实有约束优化问题也可以转化为无约束优化问题，只需要加一个指示函数，一开始提到的一般优化问题就可以利用 $\delta_C$ 转化为下面的无约束优化问题，不过这种转化可能并没有太大的意义</p>
<script type="math/tex; mode=display">
\min_x f_0(x)+\delta_{C}(x) \\
\delta_C(x)=\begin{cases}0&f_i(x)\le0,h_i(x)=0 \\ \infty \end{cases}</script><p>除了优化问题，还有一种<strong>可行解问题(Feasibility problem)</strong>，也就是给定一系列约束来寻找是否有可行解</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text {find} \quad& x \\
\text { subject to} \quad& f_{i}(x) \leq 0,\quad i=1, \ldots, m \\ 
& h_{i}(x)=0,\quad i=1, \ldots, p 
\end{aligned}</script><p>这实际上也可以转化为一般优化问题</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text {minimize} \quad& 0 \\
\text { subject to} \quad& f_{i}(x) \leq 0,\quad i=1, \ldots, m \\ 
& h_{i}(x)=0,\quad i=1, \ldots, p 
\end{aligned}</script><h2 id="2-凸优化问题"><a href="#2-凸优化问题" class="headerlink" title="2. 凸优化问题"></a>2. 凸优化问题</h2><h3 id="2-1-凸优化问题定义"><a href="#2-1-凸优化问题定义" class="headerlink" title="2.1 凸优化问题定义"></a>2.1 凸优化问题定义</h3><p><strong>凸优化问题(Convex optimization problem)</strong>要求目标函数为凸函数，而且定义域为凸集，这样可以利用凸函数和凸集的优良性质简化问题，因此凸优化问题的一般形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}(x)\\
\text { subject to } \quad& f_{i}(x) \leq 0, \quad i=1, \ldots, m\\
&Ax=b, \qquad\qquad\qquad\qquad\quad\bigstar
\end{aligned}</script><p>其中要求目标函数和约束函数 $f_0,f_1,…,f_m$ 均为<strong>凸函数</strong>。</p>
<blockquote>
<p><strong>Remarks</strong>：需要注意这里还要求<strong>等式约束均为仿射函数</strong>，这是因为我们希望定义域是凸集，假设等式约束 $h_i$ 不是线性的，即使 $h_i$ 是凸函数，$\{x|h_i(x)=0\}$ 也不一定是凸集。比如二次等式约束 $\Vert x\Vert_2=r$，得到的定义域就是一个球面，显然不是一个凸集，这对优化不利。</p>
</blockquote>
<p>有时候我们直接拿到的优化问题并不符合上面的形式，但是可以经过化简得到等价问题，就是凸的了，比如</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}(x)=x_{1}^{2}+x_{2}^{2}\\
\text { subject to } \quad& f_{1}(x)=x_{1} /\left(1+x_{2}^{2}\right) \leq 0\\
&h_{1}(x)=\left(x_{1}+x_{2}\right)^{2}=0
\end{aligned}</script><p>经过简单化简就有</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& x_{1}^{2}+x_{2}^{2}\\
\text { subject to } \quad& x_{1} \leq 0\\
&x_{1}+x_{2}=0
\end{aligned}</script><h3 id="2-2-凸优化问题的最优解"><a href="#2-2-凸优化问题的最优解" class="headerlink" title="2.2 凸优化问题的最优解"></a>2.2 凸优化问题的最优解</h3><p>对于凸优化问题有一个极其重要的性质，就是</p>
<blockquote>
<p><strong>凸优化问题的局部最优解就是全局最优解</strong></p>
</blockquote>
<p>证明也很简单，若 $x^<em>$ 为局部最优解，只需要假设另外一个全局最优解 $y\ne x^</em>,f(y)&lt;x$，那么利用凸函数的性质，就可以在 $x^*$ 的邻域内导出矛盾，如下图图示。</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-global-opti.PNG" srcset="/img/loading.gif" alt="optimal"></p>
<p>凸优化问题的最优解还有一个很好的判据</p>
<blockquote>
<p>$x$ 为最优解，<strong>当且仅当</strong> </p>
<script type="math/tex; mode=display">
\nabla f_{0}(x)^{T}(y-x) \geq 0 \quad \text { for all feasible } y</script></blockquote>
<p>证明过程只需要应用凸函数的一阶等价定义即可，即 $f(y)\ge f(x)+\nabla f^T(x)(y-x)$。</p>
<p>这个怎么直观理解呢？还记得我们之前在拟凸函数那里提到的“支撑超平面”吗？实际上 $f_0(x)$ 定义了一个<strong>等高线</strong>，由于 $f_0$ 是一个凸函数，因此这个等高线实际上围成了一个凸集，这个凸集也就是一个下水平集。而这里的 $\nabla f_0(x)$ 就是这个下水平集的一个支撑超平面，正如下图所示。同时注意，$\nabla f_0(x)$ 也代表着函数指上升的方向，如果说对任意定义域内的 $y$，都有 $\nabla f_{0}(x)^{T}(y-x) \geq 0$ 成立，那么说明我们从 $x$ 走到 $y$ 总会使 $f_0$ 增大，也就是说 $x$ 就是最优解，对应最小值。</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-global-opti2.PNG" srcset="/img/loading.gif" alt="gradient"></p>
<p>利用上面这两个性质，我们可以对很多类型的凸优化问题的最优解有一个认识。</p>
<p><strong>无约束优化问题</strong>：对无约束优化问题，$x$ 为最优解，当且仅当</p>
<script type="math/tex; mode=display">
x\in\text{dom} f_0,\quad \nabla f_0(x)=0</script><p><strong>等式约束优化问题</strong>：$\min\quad f_0(x),\qquad s.t.\quad Ax=b$，则有 $x$ 为最优解，当且仅当存在 $\nu$</p>
<script type="math/tex; mode=display">
x \in \operatorname{dom} f_{0}, \quad A x=b, \quad \nabla f_{0}(x)+A^{T} \nu=0</script><p>证明：因为 $Ax=b$ 实际上定义了一个超平面，如果 $x$ 为最优解，那么 $\nabla f_0(x)$ 一定没有这个平面内的分量，也就是说 $\nabla f_0(x)\in \ker(A)^\perp$。</p>
<p>这个实际上就等价于 <strong>Lagrange 乘子法</strong>，我们来看拉格朗日函数的定义</p>
<script type="math/tex; mode=display">
L(x,v)=f_0(x)+<Ax-b,v> \\
\Longrightarrow 
\begin{cases}\nabla f_0(x)+A^Tv=0 \\ Ax-b=0\end{cases}</script><p><strong>非负象限内的优化</strong>：$\min\quad f_0(x),\qquad s.t.\quad x\succeq 0$，$x$ 为最优解，当且仅当</p>
<script type="math/tex; mode=display">
x \in \operatorname{dom} f_{0}, \quad x \succeq 0, \quad\left\{\begin{array}{l}
\nabla f_{0}(x)_{i} \geq 0 \quad x_{i}=0 \\
\nabla f_{0}(x)_{i}=0 \quad x_{i}>0
\end{array}\right.</script><p>证明：首先由于定义域为非负象限，意味着 $(y-x)$ 可以取到正无穷，因此可以推导出 $\nabla f_0(x) \succeq 0$，故 $\nabla f_0^T(x)x\ge0$。另一方面，对于凸优化问题的最优解，有 $\nabla f_0^T(x)(y-x)\ge0$，取 $y=0$，因此有 $\nabla f_0^T(x)x\le0$，故 $\nabla f_0^T(x)x=0$。</p>
<p>实际上这里被称为<strong>互补性条件(complementary condition)</strong>，也就是 <strong>KKT 条件</strong>的一部分。</p>
<h3 id="2-3-等价问题化简"><a href="#2-3-等价问题化简" class="headerlink" title="2.3 等价问题化简"></a>2.3 等价问题化简</h3><p>有时原始优化问题比较难，可以通过等价转换进行简化。</p>
<p><strong>消去等式约束</strong>：比如对一般的凸优化问题，等式约束实际上定义了一个超平面，这可以表示为特解 + 一组基的形式</p>
<script type="math/tex; mode=display">
Ax=b \iff x=Fz+x_0 \text { for some } z</script><p>原始凸优化问题就可转化为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize (over }z) \quad& f_{0}\left(F z+x_{0}\right)\\
\text { subject to } \quad& f_{i}\left(F z+x_{0}\right) \leq 0, \quad i=1, \dots, m
\end{aligned}</script><p><strong>添加等式约束</strong>：实际上就是上面的一个逆过程，这个过程中取药添加一个等式约束 $y=Ax+b$，由于添加了变量 $y$，会使问题变量数增加，同时优化变量也需要加上 $y$。</p>
<p><strong>引入松弛变量</strong>：比如对于线性不等式约束的优化问题</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}(x)\\
\text { subject to } \quad& a_i^Tx\le b_i,\quad i=1,...,m
\end{aligned}</script><p>可以引入松弛因子 $s_i$，得到</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}(x)\\
\text { subject to } \quad& a_i^Tx + s_i = b_i,\quad i=1,...,m \\
& s_i \ge0,\quad i=1,...,m
\end{aligned}</script><p><strong><em>例子</em></strong>：下面两个优化问题是等价的吗？其中 $W^TW=I$</p>
<script type="math/tex; mode=display">
\min_x f(x)+g(Wx) \\
\min_c f(W^T c)+g(c)</script><p>不一定等价。由于 $W^TW=I$，若 $W$ 为方针，则二者等价，否则说明 $W\in R^{m\times n},m\ge n$，也即 $W$ 为一个瘦高型的矩阵，如果我们取 $f\equiv 0$，那么很显然 $\min_x g(Wx)$ 与 $\min_c g(c)$ 并不等价，因为 $W$ 列不满秩。</p>
<p><strong>epigraph 形式</strong>：任意标准形式的凸优化问题都可以转化为下面的形式</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize (over }x,t) \quad& t\\
\text { subject to } \quad& f_{0}(x)\\
\quad& f_{i}(x) \leq 0, \quad i=1, \ldots, m\\
&Ax=b
\end{aligned}</script><p>这种变化很重要，可以将优化目标转化为约束函数，对于后面一些典型凸优化问题的转化很有用。</p>
<p><strong>对某些变量最小化</strong>：实际上就是对于存在多个优化变量时，提前通过计算消去一些变量</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize } \quad& f_{0}\left(x_{1}, x_{2}\right)\\
\text { subject to } \quad& f_{i}\left(x_{1}\right) \leq 0, \quad i=1, \dots, m
\end{aligned}
\iff
\begin{aligned}
\text { minimize } \quad& \tilde{f}_{0}\left(x_{1}\right)\\
\text { subject to } \quad& \tilde{f}_{i}\left(x_{1}\right) \leq 0, \quad i=1, \dots, m
\end{aligned}</script><p>其中 $\tilde{f}_0(x_1)=\inf_{x_2}f_0(x_1,x_2)$。</p>
<h2 id="3-拟凸优化问题"><a href="#3-拟凸优化问题" class="headerlink" title="3. 拟凸优化问题"></a>3. 拟凸优化问题</h2><p>拟凸函数跟凸函数有一些相似的性质，尤其是拟凸函数的任意下水平集都是凸集，因此很多时候对于拟凸问题，也可以用凸优化的一些方法有效解决。</p>
<p><strong>拟凸优化问题(Quasi convex optimization)</strong> 的一般定义为与凸优化基本相同，只不过<strong>目标函数 $f_0(x)$ 可以是拟凸函数</strong>，但约束函数 $f_1,…,f_m$ 仍需要是凸函数。</p>
<blockquote>
<p><strong>Remarks</strong>：我个人觉得这里其实约束函数也可以是拟凸函数？因为即使是拟凸函数，$f_i(x)\le0$ 也可以得到凸的定义域？</p>
</blockquote>
<p>但是此时拟凸优化问题就没有凸优化那么好的性质了，比如局部最优解不一定是全局最优解</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-quasicvx.PNG" srcset="/img/loading.gif" alt="quasicvx"></p>
<p>尽管如此，由于拟凸函数任意下水平集 $\{x|f(x)\le t\}$ 都是凸集，我们可以利用这个性质将其转化为凸函数 $\phi_t(x)\le0$ 来表示，由此就可以用凸优化来求解。</p>
<p><strong><em>例子</em></strong></p>
<p>最简单的例子，拟凸函数 $f(x)$ 的下水平集可以表示为 $\{x|f(x)\le t\}$，我们可以用函数 $\phi_t(x)\le0$ 来等价表示</p>
<script type="math/tex; mode=display">
\phi_t(x)=\begin{cases}0 & f(x)\le t \\ \infty \end{cases}</script><p>不过这种表示方法意义不大， 这个函数不连续不可微。我们还有其他的表示方法比如</p>
<script type="math/tex; mode=display">
\phi_t(x)=\text{dist}\left(x,\{z|f(z)\le t\}\right)</script><p>另外，如果拟凸函数 $f_0(x)$ 有一些特定的性质，比如 $f_0(x)=p(x)/q(x)$，其中 $p(x)$ 为凸函数，而 $q(x)&gt;0$ 为凹函数（容易证明此时 $f_0$ 为拟凸函数），那么我们还可以取 $\phi_t(x)$ 为</p>
<script type="math/tex; mode=display">
\phi_t(x)=p(x)-t q(x)</script><p><strong>拟凸优化问题的求解</strong></p>
<p>假如当前拟凸优化问题的最优解为 $p^*$，那么对于寻找可行解问题</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{find} \quad& x \\
s.t. \quad& \phi_{t}(x) \leq 0, \quad f_{i}(x) \leq 0, \quad i=1, \ldots, m, \\
&A x=b
\end{aligned}</script><p>如果 $t\ge p^<em>$，则该问题有可行解，如果 $t&lt;p^</em>$，则没有可行解。因此对于原始凸优化问题，可以利用二分法迭代求解</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-quasicvx-solve.PNG" srcset="/img/loading.gif" alt="quasicvx-solve"></p>
<h2 id="4-典型凸优化问题"><a href="#4-典型凸优化问题" class="headerlink" title="4. 典型凸优化问题"></a>4. 典型凸优化问题</h2><h3 id="4-1-线性规划-LP"><a href="#4-1-线性规划-LP" class="headerlink" title="4.1 线性规划(LP)"></a>4.1 线性规划(LP)</h3><p>线性规划(Linear program)问题的一般形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^{T} x+d \\
\text{subject to} \quad& G x \preceq h \\
&A x=b
\end{aligned}</script><p>联系我们前面提到的凸优化问题最优解性质，有 $c^T(y-x)\ge0$，也即目标函数的等高线是一系列超平面</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-lp4.PNG" srcset="/img/loading.gif" alt="LP"></p>
<p><strong><em>例子 1</em></strong>：对于 piecewise-linear minimization 问题(无约束优化)</p>
<script type="math/tex; mode=display">
\text { minimize } \max _{i=1, \ldots, m}\left(a_{i}^{T} x+b_{i}\right)</script><p>可以转化为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text { minimize} \quad& t\\
\text { subject to} \quad& a_i^Tx + b_i \le t
\end{aligned}</script><p><strong><em>例子 2</em></strong>：多面体的切比雪夫中心(Chebyshev center)</p>
<script type="math/tex; mode=display">
\mathcal{P}=\left\{x | a_{i}^{T} x \leq b_{i}, i=1, \dots, m\right\}</script><p>可以用优化问题表示为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{maximize} \quad& r\\
\text{subject to} \quad& a_{i}^{T} x_{c}+r\left\|a_{i}\right\|_{2} \leq b_{i}, \quad i=1, \ldots, m
\end{aligned}</script><p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-chebyshev_center.PNG" srcset="/img/loading.gif" alt="chebyshev_center"></p>
<h3 id="4-2-线性分式规划"><a href="#4-2-线性分式规划" class="headerlink" title="4.2 线性分式规划"></a>4.2 线性分式规划</h3><p>线性分式规划(Linear-fractional program) 的一般形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& f_0(x) \\
\text{subject to} \quad& G x \preceq h \\
&A x=b
\end{aligned}</script><p>其中 $f_0(x)=\frac{c^Tx+d}{e^Tx+f},\quad \text{dom}f_0(x)=\{x|e^Tx+f&gt;0\}$。这个问题可以等价转化为线性规划。</p>
<h3 id="4-3-二次规划-QP"><a href="#4-3-二次规划-QP" class="headerlink" title="4.3 二次规划(QP)"></a>4.3 二次规划(QP)</h3><p>二次规划(Quadratic program)的一般形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& (1/2)x^TPx+q^Tx+r \\
\text{subject to} \quad& G x \preceq h \\
&A x=b
\end{aligned}</script><p>其中 $P\in S_{+}^n$。</p>
<p>与线性规划不同的是，目标函数的等高线变成了椭球面</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-qp.PNG" srcset="/img/loading.gif" alt="QP"></p>
<p><strong><em>例子</em></strong>：最小二乘就是最经典的二次规划的例子，$\min \Vert Ax+b\Vert_2^2$</p>
<h3 id="4-4-二次约束二次规划-QCQP"><a href="#4-4-二次约束二次规划-QCQP" class="headerlink" title="4.4 二次约束二次规划(QCQP)"></a>4.4 二次约束二次规划(QCQP)</h3><p>二次约束二次规划(Quadratically constrained quadratic program)的一般形式为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& (1/2)x^TP_0x+q_0^Tx+r_0 \\
\text{subject to} \quad& (1/2)x^TP_ix+q_i^Tx+r_i \le 0 \\
&A x=b\end{aligned}</script><p>其中 $P_i\in S_{+}^n$。</p>
<p>一般会限制 $P_1,…,P_m\in S_{++}^n$，也就是不能为 0 矩阵(有什么意义吗？不关键)</p>
<h3 id="4-5-二次锥规划-SOCP"><a href="#4-5-二次锥规划-SOCP" class="headerlink" title="4.5 二次锥规划(SOCP)"></a>4.5 二次锥规划(SOCP)</h3><p>二次锥规划(Second-order cone programming)的一般形式为</p>
<script type="math/tex; mode=display">
\begin{array}{cl}
\text { minimize } & f^{T} x \\
\text { subject to } & \left\|A_{i} x+b_{i}\right\|_{2} \leq c_{i}^{T} x+d_{i}, \quad i=1, \ldots, m \\
& F x=g
\end{array}</script><p>其实 SOCP 比前面几种问题都更广泛，他们都可以看作是 SOCP 的一种情况</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-socp.PNG" srcset="/img/loading.gif" alt="SOCP"></p>
<h3 id="4-6-鲁棒线性规划"><a href="#4-6-鲁棒线性规划" class="headerlink" title="4.6 鲁棒线性规划"></a>4.6 鲁棒线性规划</h3><p>对于优化问题，有时候我们的参数比如 $a_i,b_i$ 等都是不确定的，他们可能是在一定范围内属于某个集合，也可能是一个随机变量，这个时候就引入了鲁棒优化的概念。</p>
<p>对于线性规划问题来说，比如</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^{T} x+d \\
\text{subject to} \quad& a_i^Tx\le b_i
\end{aligned}</script><p>一种是考虑<strong>确定性模型</strong>，也即</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^{T} x+d \\
\text{subject to} \quad& a_i^Tx\le b_i \text{ for all } a_i\in\mathcal{E}_i
\end{aligned}</script><p>如果 $\mathcal{E}_{i}=\left\{\bar{a}_{i}+P_{i} u ||u|_{2} \leq 1\right\}$ 是一个椭球，则该问题可以转化为一个 SOCP 问题</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{maximize} \quad& c^Tx\\
\text{subject to} \quad& \bar{a}_{i}^{T} x+\left\|P_{i}^Tx\right\|_{2} \leq b_{i}, \quad i=1, \ldots, m
\end{aligned}</script><p>另一种是<strong>随机性模型</strong>，即</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^{T} x \\
\text{subject to} \quad& \operatorname{prob}\left(a_{i}^{T} x \leq b_{i}\right) \geq \eta, \quad i=1, \ldots, m
\end{aligned}</script><p>假如 $a_i\sim\mathcal{N}(\bar{a}_i,\Sigma_i)$ 服从高斯分布，则该问题同样可以转化为一个 SOCP 问题</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{maximize} \quad& c^Tx\\
\text{subject to} \quad& \bar{a}_{i}^{T} x+\Phi^{-1}(\eta)\left\|\Sigma_{i}^{1 / 2} x\right\|_{2} \leq b_{i}, \quad i=1, \ldots, m
\end{aligned}</script><h3 id="4-7-几何规划-GP"><a href="#4-7-几何规划-GP" class="headerlink" title="4.7 几何规划(GP)"></a>4.7 几何规划(GP)</h3><p>首先定义<strong>单项式函数(monomial function)</strong> $f(x)=cx_1^{a_1}x_2^{a_2}\cdots x_n^{a_n},\quad \text{dom}f=R_{++}^n$，其中 $c&gt;0,a_i$ 为任意实数；</p>
<p><strong>正项式函数(posynomial function)</strong> $f(x)=\sum_k c_k x_1^{a_{1k}} x_2^{a_{2k}}\cdots x_n^{a_{nk}},\quad \text{dom}f=R_{++}^n$</p>
<p>然后就可以定义<strong>几何规划(geometric program)</strong>了</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& f_0(x) \\
\text{subject to} \quad& f_i(x)\le 1,\quad i=1,...,m \\
&h_i(x)=1,\quad i=1,...,p
\end{aligned}</script><p>其中 $f_i$ 为正项式，$h_i$ 为单项式。</p>
<p>首先说明，这个优化问题并不一定是凸的，因为 $a_i$ 可以取任意实数，比如 $a_i=1/2$ 就不是凸的。那么我们这里为什么要介绍这个问题呢？别急，一会稍微做一个变换我们就可以解决这个问题了。那还有一个问题，这种形式的函数有什么意义呢？为什么专门引入这样一种非凸优化问题呢？我们看这个单项式函数 $cx_1^{a_1}x_2^{a_2}\cdots x_n^{a_n}$，像不像体积或者面积的表达式？这也是他被称为“几何规划”的原因吧。</p>
<p>好，现在我们怎么把这个非凸的问题转化为凸优化问题呢？加个 $\log$ 就行啦！对单项式来说</p>
<script type="math/tex; mode=display">
\begin{aligned}
\log f(x) &= \sum_i a_i \log x_i +\log c = a^Ty+b \\
f(x) &= e^{a^Ty+b}
\end{aligned}</script><p>对多项式来说</p>
<script type="math/tex; mode=display">
\log f(x)=\log \left(\sum_i \exp(a_i^Ty+b_i)\right)</script><p>这么一来，取完对数后的问题就是凸的了，而且我们也知道 $\log$ 是一个单射函数，原始优化问题就变成了</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& \log \left(\sum_k \exp(a_{0k}^Ty+b_{0k})\right) \\
\text{subject to} \quad& \log \left(\sum_k \exp(a_{ik}^Ty+b_{ik})\right)\le 0,\quad i=1,...,m \\
&Gy+d=0
\end{aligned}</script><h3 id="4-8-半正定规划-SDP"><a href="#4-8-半正定规划-SDP" class="headerlink" title="4.8 半正定规划(SDP)"></a>4.8 半正定规划(SDP)</h3><p>前面所讲到的都是标量函数，约束条件也都是函数值与 0 比大小，而前面的章节中我们也提到了广义不等式，对于正常锥则可以定义不等号。所以我们可以定义一种凸优化问题，这种凸优化问题的约束条件不再是普通不等式，而是广义不等式</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& f_0(x) \\
\text{subject to} \quad& f_i(x)\preceq_{K_i} 0,\quad i=1,...,m \\
&Ax=b
\end{aligned}</script><p>其中 $f_0:R^n\to R$ 为凸函数，$f_i:R^n\to R^{k_i}$ 为关于正常锥 $K_i$ 的凸函数。</p>
<p>注意这种带有广义不等式约束的凸优化问题与普通凸优化问题有着相同的性质，比如可行集为凸的，局部最优解就是全局最优解等。</p>
<p>一种简单形式的凸优化问题就是向量形式的，也就是说目标函数与约束都是仿射函数</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^Tx \\
\text{subject to} \quad& Fx+g\preceq_K 0 \\
&Ax=b
\end{aligned}</script><p>这种向量形式的广义不等式实际上就是对每个元素进行比较，因此实际上可以按照每一行拆分成多个不等式，如果取 $K=R_+^m$ 就与普通的线性规划(LP)没什么区别了。</p>
<p>接下来要介绍的就是重头戏<strong>半正定规划(Semideﬁnite program)</strong>了，我们取 $K=S^n_+$</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& c^Tx \\
\text{subject to} \quad& x_1 F_1+x_2F_2+\cdots+x_nF_n+G\preceq_K 0 \\
&Ax=b
\end{aligned}</script><p>其中 $F_i,G\in S^n$。</p>
<p>这里的不等式约束就是大名鼎鼎的<strong>线性矩阵不等式(linear matrix inequality, LMI)</strong>。</p>
<p>如果说我们现在有两个不等式约束怎么办呢？</p>
<script type="math/tex; mode=display">
x_1 \hat{F}_1+x_2\hat{F}_2+\cdots+x_n\hat{F}_n+G\preceq_K 0 \\
x_1 \tilde{F}_1+x_2\tilde{F}_2+\cdots+x_n\tilde{F}_n+G\preceq_K 0</script><p>合成一个更大的矩阵就可以了，实际上这种操作在后面也会经常见到</p>
<script type="math/tex; mode=display">
x_{1}\left[\begin{array}{cc}
\hat{F}_{1} & 0 \\
0 & \tilde{F}_{1}
\end{array}\right]+x_{2}\left[\begin{array}{cc}
\hat{F}_{2} & 0 \\
0 & \tilde{F}_{2}
\end{array}\right]+\cdots+x_{n}\left[\begin{array}{cc}
\hat{F}_{n} & 0 \\
0 & \tilde{F}_{n}
\end{array}\right]+\left[\begin{array}{cc}
\hat{G} & 0 \\
0 & \tilde{G}
\end{array}\right] \preceq 0</script><p>这是因为分块对角矩阵为正定矩阵等价于每一个子块都为正定矩阵。</p>
<p><strong><em>例子 1</em></strong>：半正定规划之所以重要，是因为他的形式更广泛，前面说 SOCP 包含了 LP、QP、QCQP，而半正定规划则包含了 SOCP！比如下面的 SOCP 问题就可以转化为 SDP</p>
<script type="math/tex; mode=display">
\begin{aligned}
SOCP:\qquad \text{minimize}&\quad f^{T} x \\
\text{subject to}&\quad \left\|A_{i} x+b_{i}\right\|_{2} \leq c_{i}^{T} x+d_{i}, \quad i=1, \ldots, m \\
\\
SDP:\qquad \text{minimize}&\quad f^{T} x \\
\text{subject to}&\quad \left[\begin{array}{cc}
\left(c_{i}^{T} x+d_{i}\right) I & A_{i} x+b_{i} \\
\left(A_{i} x+b_{i}\right)^{T} & c_{i}^{T} x+d_{i}
\end{array}\right] \succeq 0, \quad i=1, \ldots, m
\end{aligned}</script><p><strong><em>例子 2</em></strong>：最小化矩阵的最大特征值 $\min \lambda_{\max}(A(x))$，也可以通过半正定规划来描述</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize} \quad& t \\
\text{subject to} \quad& A(x)\preceq tI
\end{aligned}</script><p>其中优化变量为 $x\in R^n,t\in R$。这种等价转化是因为 $\lambda_{\max}(A)\le t\iff A\preceq tI$。</p>
<p><strong><em>例子 3</em></strong>：最小化矩阵范数 $\min \Vert A(x)\Vert_2=\left(\lambda\left(A\left(x\right)^TA\left(x\right)\right)\right)^{1/2}$，也可以等价为SDP</p>
<script type="math/tex; mode=display">
\begin{aligned}
\text{minimize}&\quad t \\
\text{subject to}&\quad \left[\begin{array}{cc}
t I & A(x) \\
A(x)^T & tI
\end{array}\right] \succeq 0
\end{aligned}</script><h3 id="4-9-向量优化"><a href="#4-9-向量优化" class="headerlink" title="4.9 向量优化"></a>4.9 向量优化</h3><p>前面介绍的所有优化问题的目标函数都是标量（尽管约束可能会出现广义不等式），如果目标函数为向量怎么办呢？前面的章节中我们介绍了广义的凸函数，同样也是基于锥定义的（实际上高维空间中“比大小”我们一般都需要通过锥来定义）。</p>
<p>一般的向量优化问题可以表示为</p>
<script type="math/tex; mode=display">
\begin{alignat}{}
&\text{minimize(w.r.t. K)} \quad& f_0(x) \\
&\text{subject to} \quad& f_i(x)\le 0,\quad i=1,...,m \\
& &h_i(x)=0,\quad i=1,...,p
\end{alignat}</script><p>凸的向量优化问题只需要将上面的等式约束换为仿射函数 $Ax=b$，同时要求 $f_0$ 为 $K-$convex 的，$f_1,…,f_m$ 为凸的。</p>
<p>向量约束优化问题的最优解相当于在下面的集合中寻找最优解</p>
<script type="math/tex; mode=display">
\mathcal{O}=\{f_0(x)|x \text{ feasible}\}</script><p>前面在将广义不等式和凸集的时候，我们讲过<strong>最小元</strong>和<strong>极小元</strong>的概念，这两个概念是不是已经忘得差不多啦！反正我基本全忘了……让我们来复习一下。</p>
<blockquote>
<p><strong>复习</strong>：最小元与极小元</p>
<p>下面两幅图分别表示最小元和极小元</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/3-minimum.png" srcset="/img/loading.gif" alt="minimum and minimal"></p>
<p>利用对偶锥，我们可以获得<strong>最小元</strong>的等价定义，即</p>
<blockquote>
<p>$x$ 是集合 $S$ 关于 $\preceq_{K}$ 的最小元 $\iff$ 对任意的 $\lambda \succ_{K*} 0$，$x$ 为 $\lambda^Tz$ 在集合 $S$ 上的唯一最小解</p>
</blockquote>
<p>什么意思呢？也就是说任意的 $\lambda\in K^{\star}$，实际上都代表了一个法向量，也就是一个支撑超平面。如果 $x$ 是最小元，则意味着对任意一个 ($K^{\star}$所定义的) 支撑超平面来说，$x$ 都是支撑点，就像下面这条幅图一样</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-minimal.png" srcset="/img/loading.gif" alt="minimal"></p>
<p>而<strong>极小元</strong>的定义是什么呢？</p>
<blockquote>
<ul>
<li>充分条件：若对于某些 $\lambda \succ_{K*} 0$，$x$ minimizes $\lambda^Tz$ over $S$，$\Longrightarrow$ $x$ 为极小元</li>
<li>必要条件：$x$ 为<strong>凸集</strong> $S$ 的极小元，$\Longrightarrow$ 存在非 0 的 $\lambda \succ_{K*} 0$ 使得 $x$ minimizes $\lambda^Tz$ over $S$</li>
</ul>
</blockquote>
<p>我们来看充分条件，只需要存在某一个 $\lambda\in K^{\star}$，使得 $x$ 为对应支撑超平面的支撑点就可以了。比如下面这幅图，蓝色的点，我们可以找到这样一个蓝色的支撑超平面，使其为支撑点，所以它就是一个极小元；而对于红色的点来说，无论如何不可能找到一个支撑超平面，使其为支撑点，因此他就有可能不是极小元，因为这只是充分条件（对这个例子来说他就不是极小元）。</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-minimum.PNG" srcset="/img/loading.gif" alt="minimum"></p>
<p>简单总结一下：</p>
<ul>
<li>最小元：无论沿着锥 $K^{*}$ 里边哪一个方向走，$x$ 都是最小值点，那么他就是最小元；</li>
<li>极小元：如果沿着其中某一个方向走，$x$ 是最小值点，那么他就是极小元。</li>
</ul>
</blockquote>
<p>复习完了最小元和极小元，不要忘了正事。我们要考虑向量约束优化问题中的最优解</p>
<script type="math/tex; mode=display">
\mathcal{O}=\{f_0(x)|x \text{ feasible}\}</script><p>这是一个集合，如果 $f_0(x)$ 是关于锥 $K$ 的最小元，那么对应的 $x$ 就被称为最优解(optimal)；如果 $f_0(x)$ 是关于锥 $K$ 的极小元，那么对应的 $x$ 则被称为 Pareto optimal。</p>
<p><img src="https://raw.githubusercontent.com/Glooow1024/ImgHosting/master/hexo/2020/10-vec-optim.PNG" srcset="/img/loading.gif" alt="optimal vs Pareto optimal"></p>
<p><strong><em>例子</em></strong>：假如我们取 $K=R_+^q$，其中</p>
<script type="math/tex; mode=display">
f_0(x)=(F_1(x),...,F_q(x))</script><p>相当于有 $q$ 个不同的目标 $F_i$，最好的情况当然是希望 $F_i$ 都是最小的。</p>
<p>若 $x^{\star}$ 为最小元（存在）就说明任意其他可行解 $y$ 都有 $f_0(x^{\star})\le f(y)$，正是我们希望的；</p>
<p>而如果只能得到极小元 $x^{po}$，就有对任意可行解 $y$，$f_0(y)\preceq f_0(x^{po})\Longrightarrow f_0(x^{po})=f(y)$。这是什么意思呢？</p>
<ol>
<li>首先不可能存在另一个 $y$ 使得每一个元素都有 $F_i(y)\le F_i(x^{po})$，要不然 $x^{po}$ 出现在这里的意义是什么？我们直接选择 $y$ 作为极小元不就好了吗？如果存在那也顶多是 $F_i(y)=F_i(x^{po}),\forall i$，这种情况下 $y$ 跟 $x^{po}$ 其实没什么区别了。</li>
<li>第二点，有可能存在某些 $y$，满足对一些 $i$ 有 $F_i(y)&gt;F_i(x^{po})$，而对另一些 $i$ 则有 $F_i(y)&lt;F_i(x^{po})$，这意味着 $y$ 在某些方面表现得比 $x^{po}$ 差，但在另一些方面则表现得更好，这实际上体现了我们在不同因素之间的一种权衡。</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Convex-Optimization/">Convex Optimization</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/SDP/">SDP</a>
                    
                      <a class="hover-with-bg" href="/tags/LP/">LP</a>
                    
                      <a class="hover-with-bg" href="/tags/SOCP/">SOCP</a>
                    
                      <a class="hover-with-bg" href="/tags/%E5%87%B8%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/">凸优化问题</a>
                    
                      <a class="hover-with-bg" href="/tags/QP/">QP</a>
                    
                      <a class="hover-with-bg" href="/tags/GP/">GP</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/03/15/fuzzy/ch7-ahp/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">模糊数学笔记 7：层次分析法</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/03/13/fuzzy/ch6-evaluate/">
                        <span class="hidden-mobile">模糊数学笔记 6：模糊综合评判</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "iw199srhJNXO53sMUbMWkSxL-gzGzoHsz",
          app_key: "ogmo6qYs8PSc7MBFk8A1PDUl",
          placeholder: "说点啥子吧 ^_^",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="https://valine.js.org" rel="nofollow noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
